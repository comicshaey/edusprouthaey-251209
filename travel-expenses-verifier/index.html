<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>관내여비 검증용 계산기 (시범) - travel-expenses-verifier</title>

  <!-- 공통 스타일 -->
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <!-- 상단 메인으로 돌아가기 -->
  <div class="home-link-wrap">
    <a href="/" class="btn-home">← 메인으로 돌아가기</a>
  </div>

  <!-- 헤더 -->
  <header class="site-header">
    <div class="shell">
      <h1>관내여비 검증용 계산기 (시범)</h1>
      <p class="sub">
        · 4시간 기준 관내여비(반일 10,000원 / 종일 20,000원)를 전제로, 나이스·지출결의 집계가 규정과 맞는지 점검하는 도구입니다.<br />
        · 2025년 5월 문막초 관내여비 지출결의서(합계 450,000원)를 참고하여 설계했습니다.
      </p>
    </div>
  </header>

  <main>
    <!-- 1. 월간 집계 단위 검증 -->
    <section class="section">
      <h2 class="local-h2">1. 월간 관내여비 집계 검증</h2>

      <div class="card">
        <p class="local-small muted">
          · 나이스 원자료에서 <strong>반일 건수 / 종일 건수</strong>만 세어서 입력하면, 규정상 예상액과 지출결의 총액이 맞는지 확인합니다.<br />
          · 단가는 기본값(반일 10,000원 / 종일 20,000원)으로 두었고, 필요시 수정 가능합니다.
        </p>

        <div class="grid two" style="margin-top:12px;">
          <div class="field">
            <label for="monthLabel">검증 대상 연월(자유 입력)</label><br />
            <input type="text" id="monthLabel" placeholder="예: 2025년 5월 관내여비" />
          </div>

          <div class="field">
            <label for="decidedTotal">지출결의 총액 (원)</label><br />
            <input type="number" id="decidedTotal" class="numeric" placeholder="예: 450000" />
          </div>
        </div>

        <hr />

        <div class="grid two">
          <div class="field">
            <label for="halfCount">반일(4시간 미만) 출장 건수</label><br />
            <input type="number" id="halfCount" class="numeric" min="0" step="1" placeholder="예: 15" />
          </div>
          <div class="field">
            <label for="fullCount">종일(4시간 이상) 출장 건수</label><br />
            <input type="number" id="fullCount" class="numeric" min="0" step="1" placeholder="예: 8" />
          </div>
        </div>

        <div class="grid two" style="margin-top:8px;">
          <div class="field">
            <label for="unitHalf">반일 단가 (원)</label><br />
            <input type="number" id="unitHalf" class="numeric" value="10000" />
          </div>
          <div class="field">
            <label for="unitFull">종일 단가 (원)</label><br />
            <input type="number" id="unitFull" class="numeric" value="20000" />
          </div>
        </div>

        <div class="row" style="margin-top:14px;">
          <button type="button" class="btn primary" id="btnVerifyMonthly">
            월간 집계 검증
          </button>
          <button type="button" class="btn ghost" id="btnResetMonthly">
            값 초기화
          </button>
        </div>

        <div id="monthlyResult" class="card" style="margin-top:14px; display:none;"></div>
      </div>
    </section>

    <!-- 2. 개별 지급내역 행 단위 검증 -->
    <section class="section">
      <h2 class="local-h2">2. 개별 지급내역 행 단위 검증 (수동 입력)</h2>

      <p class="local-small muted">
        · 나이스 원자료 엑셀에서 이름 / 관내-반일·종일 여부 / 금회지급액을 보고, 아래 표에 그대로 입력하면 됩니다.<br />
        · 각 행에 대해 “규정상 기대액”과 실제 입력액을 비교해 불일치 여부를 표시합니다.
      </p>

      <!-- 단가 공유 설정 -->
      <div class="card">
        <div class="grid two">
          <div class="field">
            <label for="detailUnitHalf">반일 단가 (원)</label><br />
            <input type="number" id="detailUnitHalf" class="numeric" value="10000" />
          </div>
          <div class="field">
            <label for="detailUnitFull">종일 단가 (원)</label><br />
            <input type="number" id="detailUnitFull" class="numeric" value="20000" />
          </div>
        </div>
        <p class="local-small muted">
          · 위 값은 행 단위 검증에서 공통으로 사용됩니다. (관내 왕복 2km 이상 기준, 4시간 미만/이상 구분)
        </p>
      </div>

      <!-- 표 + 행 추가 -->
      <div class="table-wrap">
        <table class="sheetlike simple-table" id="detailTable">
          <thead>
            <tr>
              <th style="width:36px;">No</th>
              <th style="min-width:110px;">성명</th>
              <th style="min-width:120px;">구분</th>
              <th style="min-width:110px;">지급액(원)</th>
              <th style="min-width:130px;">규정상 기대액(원)</th>
              <th style="min-width:120px;">결과</th>
            </tr>
          </thead>
          <tbody>
            <!-- 자바스크립트로 행 추가 -->
          </tbody>
        </table>
      </div>

      <div class="row gap" style="margin-top:8px;">
        <button type="button" class="btn" id="btnAddRow">행 추가</button>
        <button type="button" class="btn ghost" id="btnClearRows">전체 행 삭제</button>
        <button type="button" class="btn primary" id="btnVerifyDetails">행 단위 검증</button>
      </div>

      <div id="detailSummary" class="card" style="margin-top:14px; display:none;"></div>
    </section>

    <!-- 3. 참고 메모 -->
    <section class="section">
      <h2 class="local-h2">3. 참고 및 유의사항</h2>
      <ul>
        <li>이 도구는 <strong>관내여비(왕복 2km 이상) 정액 기준</strong>만 검증합니다. 왕복 2km 이내 근거리 실비, 운전원 특례, 하루 2회 이상 출장 시 1일 상한 등 세부 규정은 별도 검토가 필요합니다.</li>
        <li>실제 지급 전에는 반드시 해당 연도 여비 규정, 교육청·학교 내부 지침, 지출결의 내용과 함께 재검토해야 합니다.</li>
        <li>나이스 엑셀 원자료 구조에 맞춘 자동 파싱·검증 기능은 추후 동적 페이지/파이썬 서버를 별도로 구축한 후 확장하는 방향으로 생각하면 됩니다.</li>
      </ul>
    </section>
  </main>


  <footer style="text-align:center; margin-top:15px; color:#444;">
    제작자: 씩씩하고 귀여운 고주무관 · Contact: edusproutcomics@naver.com · 개인적인 토이 프로젝트입니다.
  </footer>


  <script src="script.js"></script>
    <script src="/static/global-loader.js?v=1"></script>
</body>
</html>
